
<!DOCTYPE html>
<html>
    
    
<head>

    <title>After School Club</title>

    <!-- scripts and imports -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="lessons.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">

</head>

<body>
    <h1>After School Club</h1>

    <div id="app">
        <div v-for="lesson in sortedLessons"> 
            <img v-bind:src="lesson.image" height="150">
            <h2>{{lesson.subject}}</h1>
            <p>Location: {{lesson.location}}</p>
            <p>Price: {{lesson.price}}</p>
            <p>Spaces: {{lesson.availableInventory - getItemCount(lesson.id)}}</p>
                
            <button @click="addToArray(lesson.id)" v-bind:disabled="!canAddToArray(lesson)">Add to array</button>
            
            <!-- <span v-if="itemCount(lesson) === 0">Nothing Added</span>
            <span v-else-if="itemCount(lesson) > 1">{{itemCount(lesson)}} added</span>
            <span v-else>Else</span> -->

            <br>
            <br>
        </div>
    </div>

    <script>

        let app = new Vue({

            el: '#app',
            data: {
                lessons: lessons,
                cart: [],
            },
            methods: {
                addToArray(id) {
                    this.cart.push(id);
                },
                canAddToArray(lesson) {
                    let id = lesson.id;
                    let itemCount = this.getItemCount(id);
                    let spaces = lesson.availableInventory;
                    return spaces > itemCount;
                },
                getItemCount(id){
                    let counter = 0;
                    for(i = 0; i < this.cart.length; i++){
                        if(this.cart[i] === id){
                            counter++;
                        }
                    }
                    return counter;
                },
                sortBy(attribute){
                    function compare(attributeA, attributeB){
                        if(attributeA > attributeB) return 1;
                        if(attributeA < attributeB) return -1;
                        return 0;
                    }
                    return this.lessons.sort(compare);
                }
            },

            computed: {
                sortedLessons(){
                    this.sortBy("price");
                }
            }

        });
        
    </script>

</body>

</html>